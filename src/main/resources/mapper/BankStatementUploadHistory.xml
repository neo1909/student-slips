<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="BankStatementUploadHistoryDao">
    <insert id="insertBankStatementUploadHistory" parameterType="com.studentslips.entities.BankStatementUploadHistory">
        INSERT INTO ps_bank_statement_upload_history (
        <if test="filename != null">
            file_name,
        </if>

        <if test="schoolId != null">
            school_id,
        </if>

        <if test="path != null">
            path,
        </if>

        <if test="uploadDate != null">
            upload_date,
        </if>

        <if test="postPaymentDate != null">
            post_payment_date,
        </if>

        <if test="insertDate != null">
            insert_date,
        </if>

        <if test="insertId != null">
            insert_id,
        </if>

        <if test="updateDate != null">
            update_date,
        </if>

        <if test="updateId != null">
            update_id,
        </if>

        del_yn)
        VALUES (
        <if test="filename != null">
            #{filename},
        </if>

        <if test="schoolId != null">
            #{schoolId},
        </if>

        <if test="path != null">
            #{path},
        </if>

        <if test="uploadDate != null">
            #{uploadDate},
        </if>

        <if test="postPaymentDate != null">
            #{postPaymentDate},
        </if>

        <if test="insertDate != null">
            #{insertDate},
        </if>

        <if test="insertId != null">
            #{insertId},
        </if>

        <if test="updateDate != null">
            #{updateDate},
        </if>

        <if test="updateId != null">
            #{updateId},
        </if>

        'N')
    </insert>

    <update id="updateBankStatementUploadHistory" parameterType="com.studentslips.entities.BankStatementUploadHistory">
        UPDATE ps_bank_statement_upload_history
        SET

        <if test="postPaymentDate != null">
            post_payment_date = #{postPaymentDate},
        </if>

        update_id = #{updateId},
        update_date = #{updateDate}

        WHERE file_name = #{filename}
    </update>

    <delete id="deleteBankStatementUploadHistoryById" parameterType="com.studentslips.entities.BankStatementUploadHistory">
        UPDATE ps_bank_statement_upload_history
        SET del_yn      = 'Y',
            update_id   = #{updateId},
            update_date = #{updateDate}
        WHERE ID = #{id}
          AND del_yn = 'N'

    </delete>

    <select id="selectAllBankStatementUploadHistory" parameterType="com.studentslips.entities.BankStatementUploadHistory"
            resultMap="result">
        SELECT bst.*
        FROM ps_bank_statement_upload_history bst
        where bst.del_yn = 'N'
        <if test="filename != null">
            and file_name = #{filename}
        </if>
        <if test="postPaymentYn != null">
            and post_payment_yn = #{postPaymentYn}
        </if>
    </select>

    <select id="selectBankStatementUploadHistoryById" parameterType="int"
            resultType="com.studentslips.entities.BankStatementUploadHistory"
            resultMap="result">>
    SELECT
    FROM ps_bank_statement_upload_history bst
    WHERE HT.ID = #{id}
      AND HT.del_yn = 'N';
    </select>

    <resultMap id="result" type="com.studentslips.entities.BankStatementUploadHistory">
        <result property="id" column="id"/>
        <result property="schoolId" column="school_id"/>
        <result property="filename" column="file_name"/>
        <result property="path" column="path"/>
        <result property="upload_date" column="upload_date"/>
        <result property="post_payment_date" column="post_payment_date"/>
        <result property="insertDate" column="insert_date"/>
        <result property="insertId" column="insert_id"/>
        <result property="updateDate" column="update_date"/>
        <result property="updateId" column="update_id"/>
        <result property="delYn" column="del_Yn"/>
    </resultMap>
</mapper>