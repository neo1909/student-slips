<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="BankStatementsArchiveDao">

    <update id="updateBankStatementArchive" parameterType="com.studentslips.entities.BankStatement">
        UPDATE ps_bank_statement SET
        reference_no = #{referenceNo},
        update_id = #{updateId}, update_date = #{updateDate}
        WHERE ID = #{id}
        <if test="schoolId!=0 ">
        AND school_id=#{schoolId}
        </if>
    </update>

    <select id="selectBankStatementArchive" parameterType="com.studentslips.entities.BankStatementArchiveSearch" resultMap="result">
        SELECT *
        FROM ps_bank_statement
        where bank_statement_date between #{fromDate} and  #{toDate}
        AND del_yn='N'
        <if test="schoolId!=0 ">
            AND school_id=#{schoolId}
        </if>
    </select>

    <select id="selectBankStatementArchiveById" parameterType="com.studentslips.entities.BankStatement" resultMap="result">
        SELECT *
        FROM ps_bank_statement
        where id = #{id}
          AND del_yn='N'
        <if test="schoolId!=0 ">
         AND school_id=#{schoolId}
        </if>
    </select>

    <resultMap id = "result" type = "com.studentslips.entities.BankStatement">
        <result property = "id" column = "ID"/>
        <result property = "filename" column = "file_name"/>
        <result property = "bankStatementDate" column = "bank_statement_date"/>
        <result property = "noOfChanges" column = "no_of_changes"/>
        <result property = "balance" column = "balance"/>
        <result property = "noOfBankStatement" column = "no_of_bank_statement"/>
        <result property = "claims" column = "claims"/>
        <result property = "referenceNo" column = "reference_no"/>
        <result property = "currencyDate" column = "currency_date"/>
        <result property = "insertDate" column = "insert_date"/>
        <result property = "insertId" column = "insert_id"/>
        <result property = "updateDate" column = "update_date"/>
        <result property = "updateId" column = "update_id"/>
        <result property = "postPaymentYn" column = "post_payment_yn"/>
        <result property = "delYn" column = "del_yn"/>
        <result property = "accountNumber" column = "account_number"/>
        <result property = "payer" column = "payer"/>
        <result property = "purpose" column = "purpose"/>
        <result property = "schoolId" column = "school_id"/>
    </resultMap>
</mapper>